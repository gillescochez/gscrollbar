!function(a){function b(b,h){function i(){return y.update(),k(),y}function j(){x.css(G,p/C.ratio),t.css(G,-p),J.start=x.offset()[G];var a=H.toLowerCase();v.css(a,D[h.axis]),w.css(a,D[h.axis]),x.css(a,E[h.axis])}function k(){x.bind(e,l),x[0].ontouchstart=function(a){return a.preventDefault(),x.unbind(e),l(a.touches[0]),!1},w.bind(d,o),h.scroll&&this.addEventListener?(z[0].addEventListener("DOMMouseScroll",m,!1),z[0].addEventListener("mousewheel",m,!1)):h.scroll&&(z[0].onmousewheel=m)}function l(a){J.start=F?a.pageX:a.pageY;var b=parseInt(x.css(G));return I.start=b==g?0:b,s.bind(f,o),s[0].ontouchmove=function(a){s.unbind(f),o(a.touches[0])},s.bind(d,n),x.bind(d,n),x[0].ontouchend=s[0].ontouchend=function(a){s.unbind(d),x.unbind(d),n(a.touches[0])},!1}function m(b){if(!(B.ratio>=1)){var b=b||window.event,c=b.wheelDelta?b.wheelDelta/120:-b.detail/3;p-=c*h.wheel,p=q(B[h.axis]-A[h.axis],r(0,p)),x.css(G,p/C.ratio),t.css(G,-p),b=a.event.fix(b),b.preventDefault()}}function n(a){return s.unbind(f,o),s.unbind(d,n),x.unbind(d,n),s[0].ontouchmove=x[0].ontouchend=s[0].ontouchend=null,!1}function o(a){return B.ratio>=1||(I.now=q(D[h.axis]-E[h.axis],r(0,I.start+((F?a.pageX:a.pageY)-J.start))),p=I.now*C.ratio,t.css(G,-p),x.css(G,I.now)),!1}var p,q=Math.min,r=Math.max,s=a(document),t=a('<div class="overview" />').append(b.children()),u=a('<div class="viewport" />').height(b.innerHeight()).append(t),v=a('<div class="scrollbar"><div class="track"><div class="thumb"></div></div></div>'),w=v.find(".track"),x=v.find(".thumb"),y=this,z=b.addClass(c).append(v,u),A={},B={},C={},D={},E={},F="x"==h.axis,G=F?"left":"top",H=F?"Width":"Height",I={start:0,now:0},J={};return this.update=function(a){A[h.axis]=u[0]["offset"+H],B[h.axis]=t[0]["scroll"+H],B.ratio=A[h.axis]/B[h.axis],v.toggleClass("disable",B.ratio>=1),D[h.axis]=h.size==g?A[h.axis]:h.size,E[h.axis]=q(D[h.axis],r(0,h.sizethumb==g?D[h.axis]*B.ratio:h.sizethumb)),C.ratio=h.sizethumb==g?B[h.axis]/D[h.axis]:(B[h.axis]-A[h.axis])/(D[h.axis]-E[h.axis]),p="relative"==a&&B.ratio<=1?q(B[h.axis]-A[h.axis],r(0,p)):0,p="bottom"==a&&B.ratio<=1?B[h.axis]-A[h.axis]:isNaN(parseInt(a))?p:parseInt(a),j()},i()}var c="gscrollbar",d="mouseup",e="mousedown",f="mousemove",g="auto";a.fn[c]=function(d,e){return"update"===d?(this.data(c).update(e),this):this.each(function(){a(this).data(c,new b(a(this),a.extend({},a.fn[c].defaults,d)))})},a.fn[c].defaults={axis:"y",wheel:40,scroll:!0,size:g,sizethumb:g}}(jQuery);